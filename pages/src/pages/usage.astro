---
import { joinURL } from "ufo";

import { Image } from "astro:assets";

import Layout from "../layouts/Layout.astro";

import addAVideoCaptureSource from "../assets/addAVideoCaptureSource.png";
import addBackgroundRemoval from "../assets/addBackgroundRemoval.png";
import captureFilters from "../assets/captureFilters.png";
import filterSettings from "../assets/filterSettings.png";
import filterSettingsAdvanced from "../assets/filterSettingsAdvanced.png";

const { BASE_URL } = import.meta.env;
---

<Layout
  lang="en"
  title="How to use OBS Background Removal"
  description="How to use OBS Background Removal"
>
  <main class="white-box">
    <h1>How to Use OBS Background Removal</h1>

    <ol>
      <li>
        <strong>Start OBS Studio.</strong>
      </li>
      <li>
        <strong>Add a Source:</strong><br />
        Add a video capture source (such as your webcam), or any source that provides
        an image (Video, Image, Media, Browser, Screen Capture, etc.).
        <p>
          <Image
            src={addAVideoCaptureSource}
            alt="Add a Video Capture Source"
            width="400"
          />
        </p>
      </li>
      <li>
        <strong>Open Filters:</strong><br />
        Right-click your source and select <em>Filters</em>.
        <p>
          <Image src={captureFilters} alt="Capture Filters" width="400" />
        </p>
      </li>
      <li>
        <strong>Add the Background Removal Filter:</strong><br />
        Under <em>Effect Filters</em>, click the <em>+</em> button and select <strong
          >Background Removal</strong
        >.
        <p>
          <Image
            src={addBackgroundRemoval}
            alt="Add Background Removal"
            width="400"
          />
        </p>
        <em
          >If you don't see the filter, the installation may have failed or your
          OBS version may not be compatible.</em
        >
      </li>
      <li>
        <strong>Adjust Filter Settings:</strong><br />
        Tweak the filter settings to get the best result.
        <p>
          <Image src={filterSettings} alt="Filter Settings" width="400" />
        </p>
        <p>
          For advanced options, click <em>Show Advanced Settings</em>:
          <Image
            src={filterSettingsAdvanced}
            alt="Filter Settings Advanced"
            width="400"
          />
        </p>
      </li>
    </ol>

    <h2>Tips for Best Results</h2>
    <ul>
      <li>Use a good camera and ensure your lighting is bright and even.</li>
      <li>
        <strong>Mediapipe model:</strong> Fastest, but lower accuracy. Set the threshold
        low (e.g., <code>0.05</code>) to capture your whole portrait.
      </li>
      <li>
        <strong>Robust Video Matting (RVM) model:</strong> Highest accuracy and least
        flickering, but slower.
      </li>
      <li>
        <strong>TCMonoDepth:</strong> Depth estimation model for portrait segmentation
        or "Depth of Field" blur. See the <a
          href="https://youtu.be/jC3EKSpNjQk"
          target="_blank"
          rel="noopener">tutorial/preview</a
        >.
      </li>
      <li>
        <strong>RMBG model:</strong> General background removal for any object, not
        just humans. See the <a
          href="https://youtu.be/N74VCDCToX8"
          target="_blank"
          rel="noopener">tutorial/preview</a
        >.
      </li>
    </ul>

    <p>
      Watch our tutorial video <a
        href="https://youtu.be/veqNEsMqEE0"
        target="_blank"
        rel="noopener">here</a
      >.
    </p>

    <p>All set!</p>

    <p><a href={joinURL(BASE_URL, "/")}>Back to the top page</a></p>
  </main>
</Layout>
